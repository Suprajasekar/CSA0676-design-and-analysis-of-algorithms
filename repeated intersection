def intersection(nums1, nums2):
   
    count_dict = {}
    
    
    for num in nums1:
        count_dict[num] = count_dict.get(num, 0) + 1
    
   
    result = []
    
  
    for num in nums2:
        if num in count_dict and count_dict[num] > 0:
            result.append(num)
            count_dict[num] -= 1
    
    return result


nums1 = [1, 2, 2, 1]
nums2 = [2, 2]
print(intersection(nums1, nums2)) 
